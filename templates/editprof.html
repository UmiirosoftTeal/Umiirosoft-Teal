{% extends 'base.html' %}

{% block body %}

<div class="about-container">
    <div class="about-item">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for msg in messages %}
        <div class="alert" role="alert">
            {{ msg }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        <h4><span>プロフィール編集</span></h4>

        <form method="POST" enctype="multipart/form-data">
            <br><br>
            <p style="text-align:left;">アイコンの設定 (JPG)</p>
            <label style="display:flex;justify-content:center;">
                <input type="file" accept="image/jpeg" onchange="previewImage(this);" style="display:none;"
                    name="userIcon">
                <div class="box">
                    <img id="preview" style="
                            max-width: 100%; 
                            width: 150px;
                            height: 150px;
                            object-fit: cover;
                            border-radius: 50%;
                            border: dashed rgb(238, 238, 238) 2px;
                    ">
                    <h1 class="centers">
                        <span class="material-symbols-rounded">imagesmode</span>
                    </h1>
                </div>
            </label>
            <br>
            <p style="text-align:left;">詳細</p>
            <div class="mdl-textfield mdl-js-textfield">
                <textarea name="postUserDetail" class="mdl-textfield__input" type="text" rows="3" id="sample1"></textarea>
                <label class="mdl-textfield__label" for="sample1">あなたについて書いてください！</label>
            </div>
            <button type="submit" href="/signup"
                class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
                保存する
            </button>
        </form>
    </div>
</div>

<style>
    .box {
        position: relative;
    }

    .centers {
        font-size: 20px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -110%);
        color: rgba(0, 0, 0, 0.08);
    }

    .about-container {
        height: 100vh;
    }
</style>
<script>
    function previewImage(obj) {
        var fileReader = new FileReader();
        fileReader.onload = (function () {
            document.getElementById('preview').src = fileReader.result;
        });
        fileReader.readAsDataURL(obj.files[0]);
    }
</script>
{% endblock %}